<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>N-gram tracing — ngram_tracing • idiolect</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="N-gram tracing — ngram_tracing"><meta name="description" content="This function runs the authorship analysis method called n-gram tracing, which can be used for both attribution and verification."><meta property="og:description" content="This function runs the authorship analysis method called n-gram tracing, which can be used for both attribution and verification."><meta property="og:image" content="https://andreanini.github.io/idiolect/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">idiolect</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.0.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/idiolect.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/andreanini/idiolect/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>N-gram tracing</h1>
      <small class="dont-index">Source: <a href="https://github.com/andreanini/idiolect/blob/main/R/ngram_tracing.R" class="external-link"><code>R/ngram_tracing.R</code></a></small>
      <div class="d-none name"><code>ngram_tracing.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function runs the authorship analysis method called <em>n-gram tracing</em>, which can be used for both attribution and verification.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ngram_tracing</span><span class="op">(</span></span>
<span>  <span class="va">q.data</span>,</span>
<span>  <span class="va">k.data</span>,</span>
<span>  tokens <span class="op">=</span> <span class="st">"character"</span>,</span>
<span>  remove_punct <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  remove_symbols <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_numbers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  lowercase <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  coefficient <span class="op">=</span> <span class="st">"simpson"</span>,</span>
<span>  features <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cores <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-q-data">q.data<a class="anchor" aria-label="anchor" href="#arg-q-data"></a></dt>
<dd><p>The questioned or disputed data, either as a corpus (the output of <code><a href="create_corpus.html">create_corpus()</a></code>) or as a <code>quanteda</code> dfm (the output of <code><a href="vectorize.html">vectorize()</a></code>).</p></dd>


<dt id="arg-k-data">k.data<a class="anchor" aria-label="anchor" href="#arg-k-data"></a></dt>
<dd><p>The known or undisputed data, either as a corpus (the output of <code><a href="create_corpus.html">create_corpus()</a></code>) or as a <code>quanteda</code> dfm (the output of <code><a href="vectorize.html">vectorize()</a></code>). More than one sample for a candidate author is accepted but the function will combine them so to make a profile.</p></dd>


<dt id="arg-tokens">tokens<a class="anchor" aria-label="anchor" href="#arg-tokens"></a></dt>
<dd><p>The type of tokens to extract, either "word" or "character" (default).</p></dd>


<dt id="arg-remove-punct">remove_punct<a class="anchor" aria-label="anchor" href="#arg-remove-punct"></a></dt>
<dd><p>A logical value. FALSE (default) keeps punctuation marks.</p></dd>


<dt id="arg-remove-symbols">remove_symbols<a class="anchor" aria-label="anchor" href="#arg-remove-symbols"></a></dt>
<dd><p>A logical value. TRUE (default) removes symbols.</p></dd>


<dt id="arg-remove-numbers">remove_numbers<a class="anchor" aria-label="anchor" href="#arg-remove-numbers"></a></dt>
<dd><p>A logical value. TRUE (default) removes numbers.</p></dd>


<dt id="arg-lowercase">lowercase<a class="anchor" aria-label="anchor" href="#arg-lowercase"></a></dt>
<dd><p>A logical value. TRUE (default) transforms all tokens to lower case.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>The order or size of the n-grams being extracted. Default is 9.</p></dd>


<dt id="arg-coefficient">coefficient<a class="anchor" aria-label="anchor" href="#arg-coefficient"></a></dt>
<dd><p>The coefficient to use to compare texts, one of: "simpson" (default), "phi", "jaccard", "kulczynski", or "cole".</p></dd>


<dt id="arg-features">features<a class="anchor" aria-label="anchor" href="#arg-features"></a></dt>
<dd><p>Logical with default FALSE. If TRUE then the result table will contain the features in the overlap that are unique for that overlap in the corpus. If only two texts are present then this will return the n-grams in common.</p></dd>


<dt id="arg-cores">cores<a class="anchor" aria-label="anchor" href="#arg-cores"></a></dt>
<dd><p>The number of cores to use for parallel processing (the default is one).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The function will test all possible combinations of Q texts and candidate authors and return a
data frame containing the value of the similarity coefficient selected called 'score' and an optional column with the overlapping features that only occur in the Q and candidate considered and in no other Qs (ordered by length if the n-gram is of variable length). The data frame contains a column called 'target' with a logical value which is TRUE if the author of the Q text is the candidate and FALSE otherwise.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>N-gram tracing was originally proposed by Grieve et al (2019). Nini (2023) then proposed a mathematical reinterpretation that is compatible with Cognitive Linguistic theories of language processing. He then tested several variants of the method and found that the original version, which uses the Simpson's coefficient, tends to be outperformed by versions using the Phi coefficient, the Kulczynski's coefficient, and the Cole coefficient. This function can run the n-gram tracing method using any of these coefficients plus the Jaccard coefficient for reference, as this coefficient has been applied in several forensic linguistic studies.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Grieve, Jack, Emily Chiang, Isobelle Clarke, Hannah Gideon, Aninna Heini, Andrea Nini &amp; Emily Waibel. 2019. Attributing the Bixby Letter using n-gram tracing. Digital Scholarship in the Humanities 34(3). 493–512.
Nini, Andrea. 2023. A Theory of Linguistic Individuality for Authorship Analysis (Elements in Forensic Linguistics). Cambridge, UK: Cambridge University Press.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">Q</span> <span class="op">&lt;-</span> <span class="va">enron.sample</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">K</span> <span class="op">&lt;-</span> <span class="va">enron.sample</span><span class="op">[</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu">ngram_tracing</span><span class="op">(</span><span class="va">Q</span>, <span class="va">K</span>, coefficient <span class="op">=</span> <span class="st">'phi'</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                          Q  K target  score</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  unknown [Kh Mail_2].txt Kh   TRUE  0.032</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  unknown [Kw Mail_3].txt Kh  FALSE  0.031</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  unknown [Kh Mail_2].txt Kw  FALSE  0.028</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  unknown [Kw Mail_3].txt Kw   TRUE  0.086</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  unknown [Kh Mail_2].txt Lc  FALSE  0.028</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  unknown [Kw Mail_3].txt Lc  FALSE  0.027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  unknown [Kh Mail_2].txt Ld  FALSE  0.026</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  unknown [Kw Mail_3].txt Ld  FALSE  0.046</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  unknown [Kh Mail_2].txt Lt  FALSE  0.033</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 unknown [Kw Mail_3].txt Lt  FALSE  0.048</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 unknown [Kh Mail_2].txt Lk  FALSE  0.014</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 unknown [Kw Mail_3].txt Lk  FALSE  0.027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 unknown [Kh Mail_2].txt Lb  FALSE  0.017</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 unknown [Kw Mail_3].txt Lb  FALSE  0.040</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 unknown [Kh Mail_2].txt La  FALSE  0.006</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 unknown [Kw Mail_3].txt La  FALSE -0.018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 unknown [Kh Mail_2].txt Mf  FALSE  0.021</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 unknown [Kw Mail_3].txt Mf  FALSE  0.038</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 unknown [Kh Mail_2].txt Ml  FALSE  0.016</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 unknown [Kw Mail_3].txt Ml  FALSE  0.047</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Andrea Nini.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

